<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Valentine Sherry</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Quicksand:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Quicksand', sans-serif;
            overflow-x: hidden;
            background-color: #0f172a;
            color: white;
        }
        
        .font-script { font-family: 'Great Vibes', cursive; }
        .font-times { font-family: 'Times New Roman', Times, serif; }

        .bg-animate {
            background: linear-gradient(-45deg, #0f172a, #1e1b4b, #312e81, #0f172a);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .glass {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .heartbeat { animation: beat 1.5s infinite; }
        @keyframes beat {
            0% { transform: scale(1); }
            14% { transform: scale(1.1); }
            28% { transform: scale(1); }
            42% { transform: scale(1.1); }
            70% { transform: scale(1); }
        }

        .particle {
            position: absolute;
            pointer-events: none;
            animation: pop 1s ease-out forwards;
            font-size: 2rem;
        }
        @keyframes pop {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 1; }
            100% { transform: translate(var(--dx), var(--dy)) scale(1.5); opacity: 0; }
        }

        /* Butterfly */
        .butterfly-container {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 40;
            cursor: pointer;
        }
        .butterfly {
            width: 60px;
            height: 60px;
            position: relative;
            animation: flutter 2s ease-in-out infinite;
            filter: drop-shadow(0 0 10px rgba(236, 72, 153, 0.6));
        }
        @keyframes flutter {
            0%, 100% { transform: rotate(-5deg) translateY(0px); }
            50% { transform: rotate(5deg) translateY(-5px); }
        }
        .wing {
            position: absolute;
            width: 25px;
            height: 35px;
            background: linear-gradient(135deg, #f472b6, #db2777);
            border-radius: 50% 10% 50% 10%;
            opacity: 0.9;
        }
        .wing.left {
            left: 5px;
            top: 12px;
            transform-origin: right center;
            animation: flap 0.4s ease-in-out infinite;
        }
        .wing.right {
            right: 5px;
            top: 12px;
            transform-origin: left center;
            transform: scaleX(-1);
            animation: flap 0.4s ease-in-out infinite;
        }
        @keyframes flap {
            0%, 100% { transform: rotateY(0deg); }
            50% { transform: rotateY(60deg); }
        }
        .wing.right { animation-name: flapRight; }
        @keyframes flapRight {
            0%, 100% { transform: scaleX(-1) rotateY(0deg); }
            50% { transform: scaleX(-1) rotateY(60deg); }
        }
        .butterfly-body {
            position: absolute;
            width: 6px;
            height: 30px;
            background: #fcd34d;
            border-radius: 50%;
            left: 50%;
            top: 15px;
            transform: translateX(-50%);
            z-index: 2;
        }
        .play-btn {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            font-size: 8px;
            color: #be185d;
        }

        .music-popup {
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 300px;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(236, 72, 153, 0.3);
            border-radius: 15px;
            padding: 15px;
            z-index: 45;
            display: none;
        }
        .music-popup.active { display: block; }
    </style>
</head>
<body class="bg-animate min-h-screen relative">

    <div id="startOverlay" class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm">
        <div class="text-center">
            <h1 class="text-4xl font-script text-pink-400 mb-4 animate-pulse">A Surprise for Sherry</h1>
            <button id="startBtn" class="px-8 py-3 bg-pink-600 hover:bg-pink-500 text-white rounded-full font-bold text-lg transition-all transform hover:scale-105 shadow-[0_0_20px_rgba(236,72,153,0.6)]">
                Open Your Gift üíù
            </button>
        </div>
    </div>

    <div class="butterfly-container" id="butterflyBtn">
        <div class="butterfly">
            <div class="wing left"></div>
            <div class="wing right"></div>
            <div class="butterfly-body"></div>
            <div class="play-btn" id="playIcon">‚ñ∂</div>
        </div>
    </div>

    <div class="music-popup" id="musicPopup">
        <div class="flex justify-between items-center mb-3">
            <h4 class="font-script text-xl text-pink-400">Our Song üéµ</h4>
            <button id="closeMusic" class="text-pink-400 text-xl hover:text-pink-300">√ó</button>
        </div>
        <div id="player"></div>
    </div>

    <main class="relative z-10 container mx-auto px-4 py-8 max-w-4xl">
        <header class="text-center mb-12 pt-8">
            <h1 class="text-5xl md:text-7xl font-script text-transparent bg-clip-text bg-gradient-to-r from-pink-300 via-purple-300 to-indigo-300 drop-shadow-[0_0_10px_rgba(236,72,153,0.5)] mb-4">
                My Dearest Sherry
            </h1>
            <p class="text-pink-200 text-lg tracking-widest uppercase opacity-80">Happy Valentine's Day</p>
        </header>

        <div class="flex justify-center mb-16 relative">
            <div id="bigHeartContainer" class="relative group cursor-pointer">
                <div id="bigHeart" class="text-9xl md:text-[10rem] filter drop-shadow-[0_0_30px_rgba(225,29,72,0.6)] transition-transform duration-100 select-none heartbeat">
                    ‚ù§Ô∏è
                </div>
                <div class="absolute -bottom-8 left-1/2 transform -translate-x-1/2 whitespace-nowrap">
                    <span class="text-pink-300 font-bold text-sm md:text-base bg-black/30 px-4 py-1 rounded-full backdrop-blur-md border border-pink-500/30 animate-bounce">
                        Tap me till I break!
                    </span>
                </div>
                <div class="absolute -top-6 left-1/2 transform -translate-x-1/2 w-32 h-2 bg-gray-700 rounded-full overflow-hidden border border-gray-600">
                    <div id="heartHealth" class="h-full bg-gradient-to-r from-pink-500 to-red-600 w-full transition-all duration-200"></div>
                </div>
            </div>
        </div>

        <section class="mb-16">
            <div id="clownBox" class="glass rounded-2xl p-8 max-w-md mx-auto text-center border-2 border-pink-500/30 hover:border-pink-400/60 transition-all cursor-pointer">
                <div id="clownClosed">
                    <div class="text-6xl mb-4">üéÅ</div>
                    <h3 class="text-2xl font-bold text-pink-300 mb-2">Tap Me!</h3>
                    <p class="text-pink-200/70 text-sm">A special message awaits...</p>
                </div>
                <div id="clownOpen" class="hidden">
                    <div class="text-6xl mb-4 animate-bounce">ü§°</div>
                    <div class="bg-white/10 rounded-lg p-6 border border-white/20">
                        <div class="font-times text-lg text-white leading-relaxed italic">
                            "My dearest Sherry,<br><br>
                            In your eyes, I find my home. In your smile, I find my peace. In your love, I find my forever. You are the most beautiful chapter in my life, and I can't wait to write every page with you. Happy Valentine's Day, my love.<br><br>
                            Forever yours,<br>
                            <span class="text-pink-300 font-bold">Karl</span> üíï"
                        </div>
                    </div>
                    <button id="closeClownMsg" class="mt-4 text-sm text-pink-300 hover:text-pink-200 underline bg-transparent border-none cursor-pointer">
                        Close message
                    </button>
                </div>
            </div>
        </section>

        <section class="glass rounded-2xl p-8 md:p-12 mb-16 shadow-2xl border-t border-white/10">
            <div class="prose prose-lg prose-invert mx-auto text-center">
                <p class="text-xl md:text-2xl leading-relaxed text-pink-100 font-light">
                    My Love, <br><br>
                    From the moment you walked into my life, you turned my monochrome world into a vibrant masterpiece of colors I never knew existed. Sherry, you are not just my Valentine; you are the melody to my silence, the warmth to my cold nights, and the peace to my chaos. <br><br>
                    Every laugh we share is a note in our favorite song, every touch is a spark that lights up my universe, and every moment with you feels like catching fireflies in a jar‚Äîmagical, precious, and glowing with pure joy. <br><br>
                    I promise to be your safe harbor, your loudest cheerleader, and your partner in every adventure. You are my today, my tomorrow, and my forever. I love you more than words can capture, more than the stars can count, and more with every single heartbeat.
                </p>
                <div class="mt-8 font-script text-4xl text-pink-400">Forever Yours</div>
            </div>
        </section>

        <footer class="text-center text-pink-300/50 text-sm pb-8">
            <p>Made with üíñ for Sherry</p>
        </footer>
    </main>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        // Audio
        let chimeSynth, isAudioReady = false;
        let ytPlayer, isPlaying = false;
        let popupOpen = false;

        async function initAudio() {
            await Tone.start();
            chimeSynth = new Tone.PolySynth(Tone.Synth, {
                oscillator: { type: "sine" },
                envelope: { attack: 0.02, decay: 0.3, sustain: 0.1, release: 2 },
                volume: -10
            }).toDestination();
            
            const reverb = new Tone.Reverb({ decay: 5, wet: 0.4 }).toDestination();
            chimeSynth.connect(reverb);
            
            isAudioReady = true;
            playChime(['C4', 'E4', 'G4']);
        }

        function playChime(notes) {
            if (isAudioReady) chimeSynth.triggerAttackRelease(notes, "4n");
        }

        // YouTube
        function onYouTubeIframeAPIReady() {
            ytPlayer = new YT.Player('player', {
                height: '150',
                width: '100%',
                videoId: 'xyUQKDE57Ag',
                playerVars: { 'playsinline': 1, 'controls': 1 }
            });
        }

        // UI
        document.getElementById('startBtn').addEventListener('click', () => {
            initAudio();
            document.getElementById('startOverlay').style.opacity = '0';
            setTimeout(() => document.getElementById('startOverlay').style.display = 'none', 500);
        });

        // Butterfly
        document.getElementById('butterflyBtn').addEventListener('click', () => {
            popupOpen = !popupOpen;
            document.getElementById('musicPopup').classList.toggle('active', popupOpen);
            document.getElementById('playIcon').textContent = popupOpen ? '‚ùö‚ùö' : '‚ñ∂';
            
            if (ytPlayer) {
                if (popupOpen) ytPlayer.playVideo();
                else ytPlayer.pauseVideo();
            }
            playChime(['C5', 'E5']);
        });

        document.getElementById('closeMusic').addEventListener('click', (e) => {
            e.stopPropagation();
            popupOpen = false;
            document.getElementById('musicPopup').classList.remove('active');
            document.getElementById('playIcon').textContent = '‚ñ∂';
            if (ytPlayer) ytPlayer.pauseVideo();
        });

        // Clown Box
        const clownBox = document.getElementById('clownBox');
        const clownClosed = document.getElementById('clownClosed');
        const clownOpen = document.getElementById('clownOpen');
        let isClownOpen = false;

        clownBox.addEventListener('click', (e) => {
            if (e.target.id === 'closeClownMsg' || isClownOpen) return;
            isClownOpen = true;
            clownClosed.style.display = 'none';
            clownOpen.classList.remove('hidden');
            playChime(['C4', 'E4', 'G4', 'C5']);
        });

        document.getElementById('closeClownMsg').addEventListener('click', (e) => {
            e.stopPropagation();
            isClownOpen = false;
            clownOpen.classList.add('hidden');
            clownClosed.style.display = 'block';
            playChime(['G4', 'E4']);
        });

        // Heart
        const bigHeart = document.getElementById('bigHeart');
        const heartHealth = document.getElementById('heartHealth');
        let clicks = 0;
        let isBroken = false;

        document.getElementById('bigHeartContainer').addEventListener('click', (e) => {
            if (isBroken) return;
            clicks++;
            
            bigHeart.style.transform = `scale(${1 + (clicks * 0.05)}) rotate(${Math.random() * 10 - 5}deg)`;
            setTimeout(() => { if (!isBroken) bigHeart.style.transform = 'scale(1)'; }, 100);

            const notes = ['C4', 'D4', 'E4', 'F4', 'G4', 'A4', 'B4', 'C5', 'D5', 'E5'];
            playChime([notes[Math.min(clicks - 1, notes.length - 1)]]);

            heartHealth.style.width = `${100 - (clicks / 10) * 100}%`;

            if (clicks >= 10) {
                isBroken = true;
                bigHeart.style.display = 'none';
                heartHealth.parentElement.style.display = 'none';
                playChime(['C4', 'E4', 'G4', 'C5', 'E5', 'G5']);
                
                const emojis = ['‚ù§Ô∏è', 'üíñ', 'üíó', 'üíì', 'üíï', 'üòç', 'üíò'];
                for (let i = 0; i < 30; i++) {
                    const el = document.createElement('div');
                    el.innerText = emojis[Math.floor(Math.random() * emojis.length)];
                    el.className = 'particle';
                    const angle = Math.random() * Math.PI * 2;
                    const velocity = 100 + Math.random() * 200;
                    el.style.setProperty('--dx', Math.cos(angle) * velocity + 'px');
                    el.style.setProperty('--dy', Math.sin(angle) * velocity + 'px');
                    el.style.left = e.clientX + 'px';
                    el.style.top = e.clientY + 'px';
                    document.body.appendChild(el);
                    setTimeout(() => el.remove(), 1000);
                }
                
                const msg = document.createElement('div');
                msg.innerText = "You broke my heart... with love! üíñ";
                msg.className = "absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-2xl font-bold text-pink-300 whitespace-nowrap animate-bounce";
                document.getElementById('bigHeartContainer').appendChild(msg);
            }
        });
    </script>
</body>
                    </html>
